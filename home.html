{% extends "base.html" %}
{% block base %}home{% endblock base %}
{% block main %}
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Arial', sans-serif;
        background-color: #e1e4ea;
        color: #e6f1ff;
        height: 100vh;
        overflow: hidden;
        position: relative;
        transition: all 0.5s ease;
    }

    #bottle-container {
        position: absolute;
        cursor: pointer;
        transition: all 1.5s cubic-bezier(0.25, 1, 0.5, 1);
        z-index: 100;
        filter: drop-shadow(0 0 10px rgba(64, 213, 235, 0.7));
    }

    #bottle {
        width: 100px;
        height: 160px;
        background-image: url('https://i.pinimg.com/originals/6c/7b/82/6c7b82021f877d771de25225b0391e8d.gif');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        transition: transform 0.3s ease;
    }

    #bottle:hover {
        transform: scale(1.1);
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
    }

    .floating {
        animation: float 3s ease-in-out infinite;
    }
</style>

<body>
    <div id="bottle-container">
        <div id="bottle" class="floating" 
            alt="Glass bottle with a rolled-up message inside, glowing with blue light, floating in dark space">
        </div>
    </div>

    <script>
        const bottle = document.getElementById('bottle-container');
        const bottleImg = document.getElementById('bottle');
        let clicked = false;

        // Position the bottle randomly on page load
        positionBottle();

        // Click event to redirect
        bottle.addEventListener('click', function() {
            if (!clicked) {
                clicked = true;

                // Optional: Bottle animation to center first
                bottleImg.classList.remove('floating');
                bottle.style.left = '50%';
                bottle.style.top = '50%';
                bottle.style.transform = 'translate(-50%, -50%) scale(1.2)';

                // Redirect after short delay
                setTimeout(function() {
                    window.location.href = "new.html";
                }, 1000);
            }
        });

        function positionBottle() {
            const corner = Math.floor(Math.random() * 4);
            const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
            const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

            let left, top;
            switch(corner) {
                case 0: left = '20px'; top = '20px'; break;
                case 1: left = vw - 120 + 'px'; top = '20px'; break;
                case 2: left = '20px'; top = vh - 180 + 'px'; break;
                case 3: left = vw - 120 + 'px'; top = vh - 180 + 'px'; break;
            }

            bottle.style.left = left;
            bottle.style.top = top;
            bottle.style.transform = 'none';
        }

        // Reposition on resize (if still floating)
        window.addEventListener('resize', function() {
            if (!clicked) positionBottle();
        });
    </script>
</body>
{% endblock main %}
